name: ocplist Actions
on:
  pull_request:
    branches:
      - main
  push:
    branches:
      - main
  workflow_dispatch:
concurrency:
  group: pages
  cancel-in-progress: false
permissions:
  contents: read
  pages: write
  id-token: write
jobs:
  pages-deploy-v7Cfnu:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: "${{ steps.deployment.outputs.page_url }}"
    steps:
      - name: Checkout
        uses: "actions/checkout@v4"
      - name: Setup Pages
        uses: "actions/configure-pages@v5"
      - name: Upload artifact
        uses: "actions/upload-pages-artifact@v3"
        with:
          path: public/
      - name: Deploy to GitHub Pages
        id: deployment
        uses: "actions/deploy-pages@v4"
  dart-analyze-mU4gOZ:
    runs-on: ubuntu-latest
    steps:
      - uses: "actions/checkout@v4"
      - uses: "dart-lang/setup-dart@v1"
      - name: Dart Analyze at /
        run: |-
          echo "$PWD %cd%"
          dart pub get
          dart format --output=none .
          dart analyze
  dart-build-UBAsye:
    runs-on: "${{ matrix.os }}"
    strategy:
      matrix:
        os:
          - ubuntu-latest
          - windows-latest
          - macOS-latest
        include:
          - os: ubuntu-latest
            output-name: ocplist-ubuntu
          - os: windows-latest
            output-name: ocplist-windows
          - os: macOS-latest
            output-name: ocplist-macOS
    steps:
      - uses: "actions/checkout@v4"
      - uses: "dart-lang/setup-dart@v1"
      - name: Dart Build at /
        run: |-
          mkdir -p build
          dart pub get
          dart compile exe bin/main.dart -o build/${{ matrix.output-name }}
      - uses: "actions/upload-artifact@v4"
        with:
          name: "executables-${{ github.run_id }}"
          path: "build/${{ matrix.output-name }}"
